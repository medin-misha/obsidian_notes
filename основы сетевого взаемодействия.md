## что происходит когда ты вводишь https://rt.pornhub.com и нажимаешь Enter в адресной строке браузера
Тут я опущу подробность с тем как компьютер понимает что ты нажал на `enter` и сразу перейду к сути того что я хотел написать.

### анализ URL
у браузера теперь есть
- протокол передачи гипертекста `html`
- ресурс в человеко-читаемым видом `rt.pornhub`
- домен `.com`
если ты ввёл не правильный текст ссылки то браузер не позволит тебе подключиться к сайту по тому что текст ссылки не правильный допустим:
- https://rt.pornhub.co
- https://rt.pornhu.com
однако если мы допустим ошибку в части где `https://` то браузер начнёт шариться в своей поисковой системе и начинать шуршать нейросетями что бы найти сайты с фрагментами текста похожим на `htt//rt.pornhub.com` если ты допустил ошибку даже в имени сайта то всё равно нейронки додумают что ты имел в виду



###  HSTS
далее браузер проверяет список HSTS если сайт есть в этом списке то он принудительно связывается с ним через HTTPS.

> Если в кратце HTTPS это протокол более безопасный чем HTTP.

### поиск DNS
На этом этапе браузер проверяет, находиться ли этот домен в его кеше.
Если он не найден, браузер проверяет, можно ли разрешить это имя хоста в файле hosts на твоём компьютере, прежде чем пытаться разрешить его для DNS.
Если имя хоста `rt.pornhub` в нашем случае не кешировано и не найдено то мы отправляем запрос на специальный сервер (DNS).
Если DNS не нашел IP адресс сервера то ты не попадаешь на свой сайт.
### открытие сокета
DNS отправляет нам ip сервера если нашел то он вызывает функцию `socket` и создаёт сегмент `TCP` далее твой компьютер начинают формировать пакет. 
после формирования пакета он идёт через модем который преобразует пакет в бинарный код (0,1) потом этот код идёт по сетевым узлам модем узла получает эти 0ли и 1ницы преобразует 0ли и 1диници в пакет и отправляет следуйщему пока в конечном итоге пакет достигнет маршрутизатора, управляющего локальной подсетью. Оттуда он продолжит путь к пограничным маршрутизаторам автономной системы (AS), другим ASE и, наконец, к серверу назначения. 
Каждый маршрутизатор на этом пути извлекает адрес назначения из заголовка IP и направляет его на соответствующий следующий переход.
Далее это подключение происходит несколько раз для безопасности.

- Клиент выбирает начальный порядковый номер (ISN) и отправляет пакет на сервер с установленным битом SYN, чтобы указать, что он устанавливает ISN
- Сервер получает SYN, `и если он в приятном настроении`:
    
    - Сервер сам выбирает свой начальный порядковый номер
    - Сервер устанавливает SYN, чтобы указать, что он выбирает свой ISN
    - Сервер копирует (client ISN + 1) в свое поле ACK и добавляет флаг ACK, чтобы указать, что он подтверждает получение первого пакета
    
- Клиент подтверждает соединение, отправляя пакет:
    
    - Увеличивает собственный порядковый номер
    - Увеличивает количество подтверждений получателя
    - Устанавливает поле подтверждения
    
- Данные передаются следующим образом:
    
    - Поскольку одна сторона отправляет N байтов данных, она увеличивает их последовательность на это число
    - Когда другая сторона подтверждает получение этого пакета (или цепочки пакетов), она отправляет пакет ACK со значением ACK, равным последней полученной последовательности от другой стороны
    
- Чтобы закрыть соединение:
    
    - The closer отправляет пакет FIN
    - Другие стороны принимают пакет FIN и отправляют свой собственный FIN
    - The closer подтверждает СОГЛАСИЕ другой стороны с помощью ACK
      
### рукопожатие
твой компьютер отправляет `привет` далее происходит обмен сертификатами и проверками безопасности, при этом шифруя всё подряд это слижком сложно для меня на этом этапе развития. 



### HTTP 
мы установили какое не какое соединение с сервером, если браузер разработан гуглом то он согласует с сервером обновление с HTTP до SPDY это как HTTP только немного более продвинутое.
Если ты пользуешься другим браузером то компьютер отправляет запрос чуть другого вида
```
GET / HTTP/1.1
Host: google.com
Connection: close
[other headers]
```
other headers это данные которые отсылает компьютер на сервер если у тебя сильно старый браузер. Наш запрос определяет функцию `закрыть` по тому что мы должны по протоколу после завершения ответа
Сервер нам отвечает 
```
200 OK
[response headers]
```
по мимо такого мини текста отправляется полезная нагрузка, то есть html css js которые отвечают за ФРОНТ сайта фронт для уточнения это фронтенд.
Затем сервер может либо закрыть соединение, либо, если заголовки, отправленные клиентом, запросили это, сохранить соединение открытым для повторного использования для дальнейших запросов. 

[[IT]]