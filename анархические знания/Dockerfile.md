Докерфайл это инструкция для создания, настройки, и запуска image в [[docker]]

## файлы Dockerfile
В файлах Dockerfile содержиться инструкции по созданию образа. Инструкции набираються заглавными буквами `COMMAND arg`. Инструкции при сборке обараза обрабатываються сверзу в низ.

Слои (OС, библиотеки, код) создают инструкции `FROM, RUN, COPY, ADD` . Друргие инструкции что то настраивают, описывают метаданные, и так далее. 
### инструкции
- `FROM` задаёт базовый образ (FROM python:3.12)
- `LABEL` описывает метаданные, кто создал и кто поддерживает образ (LABEL admin="misha")
- `ENV` устанавливает переменные среды (ENV home_dir /app) к ним можно обращаться через os.environ["home_dir"]
- `RUN` выполняет какую то команду при сборке контейнера (RUN apt-get install python) лучше всего использовать как можно меньше инструкций RUN так будет лучше.
- `COPY` что то копирует в контейнер из твоей системы (COPY file/path file/path/in/conteiner)
- `ADD` дополненная версия COPY которая умеет распаковывать архивы, скачивать файлы по URL и имеет особенности при работе с путями (ADD app.tar.gz /app) копирование и распаковка архива
- `CMD` описывает команду которая выполняеться при запуске контейнера в виде списка (CMD ['python', 'manage.py', 'runserver'])
- `WORKDIR` создаёт и\или задаёт работчую дерикторию (типо cd path/) для послудуйщих инструкций (WORKDIR /app)
- `ARG` создаёт переменные которые используються для зборки образа (ARG VERSION=1.0) их можно использовать в Dockerfile
- `ENTRYPOINT` как CMD только это основная команда для запуска. (ENTRYPOINT ["python", "manage.py", "runserver"])
- `EXPOSE` говорт что этот порт будет открыт, но при запуске всё равно нуджно использовать -p (EXPOSE 8000)
- `VOLUME` создаёт точку монтирования для работы с постоянным хранилищем (VOLUME /app/data)
Dockerfile должен начинаться с инструкции `FROM` по тому что она самая тяжеловесная и создаёт среду в которой могут выполняться все остальные команды.
## как выглядит Dockerfile
создаё main.py это будет приложение с которым ты будешь работать
```python
import time  
  
counter = 0  
while True:  
    print(f"прошло: {counter} секунд")  
    time.sleep(1)
```
оно просто раз в секунду пишет то сколько секунд прошло.
Далее создай файл Dockerfile у него нет разширения
```Dockerfile
FROM python:3.12  
WORKDIR /app  
  
COPY main.py /app/ main.py  
  
CMD ["python", "main.py"]
```
тут мы скачиваем с https://hub.docker.com/_/python image python версии 3.12 там уже предустановлен линукс так что по факту мы устанавливаем python и linux. Почти во всех image есть linux по тому что python или другие программы без ОС не будут работать.

далее мы создаём и входим в папку /app/. 
копируем файл с программой path/to/program /path/in/image/ name
и запускаем 

как собрать?
в консоли в дериктории с Dockerfile
```bash
sudo docker build -t misha .
```
тыт мы заставляем докер собрать файл
- `-t` означает тег(имя контейнера)
- `.` папка в которой есть Dockerfile в данном случае . означает дериктория в которой мы сидим
запуск тоже в консоли
```
sudo docker run -ti misha 
```
тут мы говорим докеру что бы он запустил контейнер
- `-ti` это настройка которая выводит логи которые генерит наше приложение нам в консоль, без этого докер просто запустит процесс который будет молцать
- `misha` имя контейнера





